'use strict';

var lotteryData = [{
    id: '1',
    name: '九尾'
}, {
    id: '2',
    name: '应龙'
}, {
    id: '3',
    name: '鼠标垫'
}, {
    id: '4',
    name: '好感玉'
}, {
    id: '5',
    name: '蝶恋花'
}, {
    id: '6',
    name: '矿泉水'
}];
'use strict';

/*
 * @Author: whj 
 * @Date: 2018-06-27 13:39:51 
 * @Last Modified by: whj
 * @Last Modified time: 2018-06-27 14:57:40
 */
(function () {

    var lottery = {

        isRun: false,

        run: function run() {
            if (!this.isRun) {
                this.isRun = true;
                $('#lottery-end').removeClass('fn-show');
                $('#lottery-bg').addClass("fn-run");

                this.testRun();
                return;
            }
        },
        stop: function stop(id, data) {
            $('#lottery-bg').removeClass().addClass('rotateInStop-' + id);

            this.isRun = false;
            this.err(data[id]);
        },
        err: function err(obj) {
            console.log(obj);
            $('#lottery-end').html('恭喜，获得' + obj.name + '!').addClass('fn-show');
        },
        testRun: function testRun() {
            var lotteryLen = lotteryData.length;
            setTimeout(function () {
                var id = Math.floor(Math.random() * lotteryLen);
                console.log(id);
                lottery.stop(id, lotteryData);
            }, 1000);
        }
    };

    var app = {
        init: function init() {

            this.even();
        },
        even: function even() {

            $('#lottery-btn').on('click', function () {
                lottery.run();
            });
        }
    };

    app.init();
})();